{% extends 'base.html' %}

{% block title %}Set New Password - M2W Platform{% endblock %}

{% block content %}
<div class="relative flex size-full min-h-screen flex-col bg-white">
    <div class="layout-container flex h-full grow flex-col">
        <div class="px-40 flex flex-1 justify-center py-5">
            <div class="layout-content-container flex flex-col w-[512px] max-w-[512px] py-5 max-w-[960px] flex-1">
                <h2 class="text-[#121416] tracking-light text-[28px] font-bold leading-tight px-4 text-center pb-3 pt-5">Set New Password</h2>
                
                {% if validlink %}
                <form method="post">
                    {% csrf_token %}
                    
                    <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
                        <label class="flex flex-col min-w-40 flex-1">
                            <p class="text-[#121416] text-base font-medium leading-normal pb-2">New Password</p>
                            <input type="password" name="new_password1" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#121416] focus:outline-0 focus:ring-0 border border-[#dde1e3] bg-white focus:border-[#dde1e3] h-14 placeholder:text-[#6a7681] p-[15px] text-base font-normal leading-normal" placeholder="Enter new password" required>
                            {% if form.new_password1.errors %}
                                <div class="text-red-600 text-sm mt-1">{{ form.new_password1.errors.0 }}</div>
                            {% endif %}
                        </label>
                    </div>
                    
                    <div class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
                        <label class="flex flex-col min-w-40 flex-1">
                            <p class="text-[#121416] text-base font-medium leading-normal pb-2">Confirm New Password</p>
                            <input type="password" name="new_password2" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#121416] focus:outline-0 focus:ring-0 border border-[#dde1e3] bg-white focus:border-[#dde1e3] h-14 placeholder:text-[#6a7681] p-[15px] text-base font-normal leading-normal" placeholder="Confirm new password" required>
                            {% if form.new_password2.errors %}
                                <div class="text-red-600 text-sm mt-1">{{ form.new_password2.errors.0 }}</div>
                            {% endif %}
                        </label>
                    </div>
                    
                    <div class="flex px-4 py-3">
                        <button type="submit" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 flex-1 bg-[#dce8f3] text-[#121416] text-sm font-bold leading-normal tracking-[0.015em]">
                            <span class="truncate">Set New Password</span>
                        </button>
                    </div>
                </form>
                {% else %}
                <div class="flex flex-col items-center py-8">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mb-6">
                        <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </div>
                    
                    <p class="text-[#121416] text-base font-normal leading-normal pb-3 pt-1 px-4 text-center">
                        The password reset link is invalid or has expired. Please request a new password reset.
                    </p>
                    
                    <div class="flex px-4 py-3">
                        <a href="{% url 'accounts:password_reset' %}" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 flex-1 bg-[#dce8f3] text-[#121416] text-sm font-bold leading-normal tracking-[0.015em]">
                            <span class="truncate">Request New Reset</span>
                        </a>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
